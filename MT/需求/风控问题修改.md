## 查询时SQL参数

问题代码，若sceneIdList为Empty，直接导致 `where id in`。
```java
List<RiskStrategyGroupPo> riskStrategyGroupPoList = riskStrategyGroupRepository.queryRiskStrategyGroupList(  
        param);  
List<Long> sceneIdList = riskStrategyGroupPoList.stream().map(RiskStrategyGroupPo::getSceneId)  
        .distinct().collect(  
                Collectors.toList());  
//基于风控场景id查询风控场景名称  
List<RiskScenePo> riskScenePoList = riskSceneRepository.queryRiskSceneByIdList(sceneIdList);
```

在Repository层改方法的入口处添加判空

## 删除策略分组时未删除策略

删除策略分组时需要删除分组下的策略，规则，以及规则与策略的关联关系，其中规则删除为RPC服务

```java
public void deleteRiskStrategy(RiskStrategyDeleteTRequest request) {  
    Long stragetyId = request.getId();  
    if (Objects.isNull(stragetyId)) {  
        throw new ParamException("删除风控策略 策略id不能为空");  
    }  
    String operator = getOperateMis();  
    //查询风控策略对应规则系统id集合  
    List<RiskStrategyRiskRuleRelationPo> riskStrategyRiskRuleRelationPos = riskStrategyRepository.queryRiskRuleByStrategyId(  
            stragetyId);  
    //先删除db数据 保证一个事务 然后删除规则服务数据  
    riskStrategyRepository.batchLogicDelete(stragetyId,operator);  
    //删除规则服务对应规则信息  
    List<Long> ruleIds = riskStrategyRiskRuleRelationPos.stream()  
            .map(RiskStrategyRiskRuleRelationPo::getRiskRuleId).collect(  
                    Collectors.toList());  
    ruleCenterGateway.batchLogicDeleteRule(ruleIds);  
}
```

删除策略时涉及表

1. 根据策略ID删除`risk_event_type_risk_strategy_relation`
2. 根据ID删除`risk_solution`
3. 根据策略ID删除`risk_strategy_risk_rule_relation`
4. 根据策略ID删除`risk_strategy`

RPC
1. 根据策略ID查询对应的规则ID列表
2. 分批删除

**删除方案**

RPC调用放在事务完成后（确保业务无问题，容忍垃圾数据）

	在事务执行之前查询各个表主键，根据主键批量失效


## 规则因子复制

