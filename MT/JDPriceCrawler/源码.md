> Application.java

```java
import com.alibaba.fastjson2.JSON;  
import com.alibaba.fastjson2.JSONObject;  
import okhttp3.OkHttpClient;  
import okhttp3.Request;  
import okhttp3.Response;  
  
import java.math.BigDecimal;  
import java.math.RoundingMode;  
import java.net.URLEncoder;  
import java.text.SimpleDateFormat;  
import java.util.Date;  
import java.util.concurrent.TimeUnit;  
  
public class Application {  
	// 或者 https://api.jdjygold.com/gw/generic/hj/h5/m/latestPrice
    private static final String BASE_URL = "https://ms.jr.jd.com/gw/generic/hj/h5/m/latestPrice";  
    private static final OkHttpClient httpClient = new OkHttpClient.Builder()  
            .connectTimeout(10, TimeUnit.SECONDS)  
            .readTimeout(10, TimeUnit.SECONDS)  
            .build();  
    private static final SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");  
    private static final SimpleDateFormat sdf1 = new SimpleDateFormat("HH:mm:ss");  
  
    public static void main(String[] args) {  
        String lastPrice = null;  
        while (true) {  
            try {  
                PriceInfo currentPriceInfo = fetchPriceInfo();  
                if (!currentPriceInfo.price.equals(lastPrice)) {  
                    System.out.println(currentPriceInfo);  
                    lastPrice = currentPriceInfo.price;  
                }  
                Thread.sleep(500); // 休眠1秒  
            } catch (Exception e) {  
                System.err.println("发生错误: " + e.getMessage());  
            }  
        }  
    }  
  
    private static PriceInfo fetchPriceInfo() throws Exception {  
        String encodedReqData = URLEncoder.encode("{}", "UTF-8");  
        String url = BASE_URL + "?reqData=" + encodedReqData;  
        Request request = new Request.Builder()  
                .url(url)  
                .build();  
  
        try (Response response = httpClient.newCall(request).execute()) {  
            if (!response.isSuccessful()) {  
                throw new RuntimeException("HTTP请求失败，状态码: " + response.code());  
            }  
            String jsonResponse = response.body().string();  
            JSONObject jsonObject = JSON.parseObject(jsonResponse);  
            JSONObject datasNode = jsonObject.getJSONObject("resultData").getJSONObject("datas");  
  
            String price = new BigDecimal(datasNode.getString("price")).setScale(2, RoundingMode.HALF_UP).toString();  
            String upAndDownRate = datasNode.getString("upAndDownRate");  
            String upAndDownAmt = datasNode.getString("upAndDownAmt");  
            long timeMillis = datasNode.getLong("time");  
            String formattedTime = sdf1.format(new Date(timeMillis));  
  
            return new PriceInfo(formattedTime, price, upAndDownRate, upAndDownAmt);  
        }  
    }  
  
    private static class PriceInfo {  
        String time;  
        String price;  
        String upAndDownRate;  
        String upAndDownAmt;  
  
        PriceInfo(String time, String price, String upAndDownRate, String upAndDownAmt) {  
            this.time = time;  
            this.price = price;  
            this.upAndDownRate = upAndDownRate;  
            this.upAndDownAmt = upAndDownAmt;  
        }  
  
        @Override  
        public String toString() {  
            return String.format("%s   %s %s %s", time, price, upAndDownAmt, upAndDownRate);  
        }  
    }  
}
```

> pom.xml

```xml
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"  
  xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">  
  <modelVersion>4.0.0</modelVersion>  
  <groupId>com.chai</groupId>  
  <artifactId>JDPriceCrawler</artifactId>  
  <version>1.0</version>  
  <name>JDPriceCrawler</name>  
  <packaging>jar</packaging>  
  
  <properties>  
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>  
    <maven.compiler.source>1.8</maven.compiler.source>  
    <maven.compiler.target>1.8</maven.compiler.target>  
  </properties>  
  
  <dependencies>  
    <dependency>  
      <groupId>com.alibaba</groupId>  
      <artifactId>fastjson</artifactId>  
      <version>2.0.50</version>  
    </dependency>  
    <dependency>  
      <groupId>com.squareup.okhttp3</groupId>  
      <artifactId>okhttp</artifactId>  
      <version>4.12.0</version>  
    </dependency>  
  </dependencies>  
  
  <build>  
    <plugins>  
      <plugin>  
        <groupId>org.apache.maven.plugins</groupId>  
        <artifactId>maven-shade-plugin</artifactId>  
        <version>3.2.4</version>  
        <executions>  
          <execution>  
            <phase>package</phase>  
            <goals>  
              <goal>shade</goal>  
            </goals>  
            <configuration>  
              <createDependencyReducedPom>false</createDependencyReducedPom>  
              <transformers>  
                <transformer implementation="org.apache.maven.plugins.shade.resource.ManifestResourceTransformer">  
                  <mainClass>Application</mainClass>  
                </transformer>  
              </transformers>  
              <minimizeJar>true</minimizeJar>  
            </configuration>  
          </execution>  
        </executions>  
      </plugin>  
    </plugins>  
  </build>  
</project>
```

> shell

```shell
#!/bin/bash

# 获取脚本所在目录
DIR="$( cd "$( dirname "${BASH_SOURCE[0]}" )" && pwd )"

# JAR 文件名
JAR_FILE="JDPriceCrawler-1.0.jar"

# 检查 JAR 文件是否存在
if [ ! -f "$DIR/$JAR_FILE" ]; then
    echo "错误：$JAR_FILE 不存在。请确保已经构建了项目。"
    exit 1
fi

# 运行 JAR 文件
java -jar "$DIR/$JAR_FILE"
```

> 命令行输出

```shell

#!/bin/bash

# 请求地址（含 reqData={} 的 URL 编码）
url="https://ms.jr.jd.com/gw/generic/hj/h5/m/latestPrice?reqData=%7B%7D"

# 上一次的价格（用于判断是否变化）
last_price=""

# === 简化的 JSON 字段提取函数 ===
extract() {
  # $1: 原始 JSON 字符串
  # $2: 要提取的字段名（如 price、upAndDownAmt 等）
  echo "$1" | grep -o "\"$2\":\"[^\"]*\"" | cut -d':' -f2- | tr -d '"'
}

# === 日志打印函数 ===
log() {
  local level="$1" msg="$2"
  # local time=$(date "+%Y-%m-%d %H:%M:%S")
  local time=$(date "+%H:%M:%S")
  local color

  # 根据日志等级决定颜色
  case "$level" in
    INFO)  color="\033[1;34m" ;;   # 蓝色
    WARN)  color="\033[1;33m" ;;   # 黄色
    ERROR) color="\033[1;31m" ;;   # 红色
    DEBUG) color="\033[0;36m" ;;   # 青色
    *)     color="\033[0m"    ;;   # 默认
  esac

  # 打印带颜色的日志（最后加 \033[0m 恢复默认色）
  # echo -e "${color}[$time] [$level] $msg\033[0m"
  echo -e "${color}[$time] $msg\033[0m"
}

# 启动日志
log INFO "启动金价监控..."

# === 主循环 ===
while true; do
  # 请求接口，获取 JSON 响应
  response=$(curl -s "$url")

  # 提取三个字段
  price_raw=$(extract "$response" price)
  amt=$(extract "$response" upAndDownAmt)
  rate=$(extract "$response" upAndDownRate)

  # 如果字段有一个为空，说明接口异常
  [[ -z "$price_raw" || -z "$amt" || -z "$rate" ]] && {
    log WARN "接口返回异常，跳过本次"
    sleep 0.5
    continue
  }

  # 使用 awk 格式化价格保留两位小数
  price=$(awk "BEGIN { printf \"%.2f\", $price_raw }")

  # 打 DEBUG 日志（用于调试）
  # log DEBUG "price=$price, amt=$amt, rate=$rate"

  # 如果价格有变化，就打印 INFO 日志
  if [[ "$price" != "$last_price" ]]; then
    log INFO "$price $amt $rate"
    last_price="$price"
  fi

  # 休眠 0.5 秒
  sleep 0.5
done

```

> mac菜单栏 goldprice.1s.sh
```shell

#!/bin/bash

# 请求地址
url="https://ms.jr.jd.com/gw/generic/hj/h5/m/latestPrice?reqData=%7B%7D"

# 简化字段提取函数
extract() {
  echo "$1" | grep -o "\"$2\":\"[^\"]*\"" | cut -d':' -f2- | tr -d '"'
}

# 请求接口
response=$(curl -s "$url")

# 提取字段
price_raw=$(extract "$response" price)
amt=$(extract "$response" upAndDownAmt)
rate=$(extract "$response" upAndDownRate)

# 校验返回内容
if [[ -z "$price_raw" || -z "$amt" || -z "$rate" ]]; then
  echo "金价获取失败 ⚠️"
  echo "---"
  echo "接口返回异常"
  echo "强制刷新 | refresh=true"
  exit 0
fi

# 格式化价格
price=$(awk "BEGIN { printf \"%.2f\", $price_raw }")

# 状态栏显示
echo "$price"

# 菜单内容
echo "---"
echo "涨跌金额: $amt"
echo "涨跌幅度: $rate"
echo "刷新时间: $(date '+%H:%M:%S')"
echo "强制刷新 | refresh=true"

```
## 相关API

网页版本京东金主页

> https://m.jdjygold.com/finance-gold/newgold/home/

获取最新价API

> https://api.jdjygold.com/gw/generic/hj/h5/m/latestPrice

> https://ms.jr.jd.com/gw/generic/hj/h5/m/latestPrice

> 浙商：
> https://api.jdjygold.com/gw2/generic/produTools/h5/m/getGoldPrice?goldCode=CZB-JCJ

圈子中获取金价相关信息

> https://ms.jr.jd.com/gw2/generic/CreatorSer/newh5/m/getFirstRelatedProductInfo?reqData={"circleId":"13245","invokeSource":5,"productId":"21001001000001"}

金友圈

> https://content.jr.jd.com/jrq/?sid=#/group?id=13245

获取金友圈置顶现货黄金

> https://ms.jr.jd.com/gw/generic/jimu/h5/m/homeFeedFlow?reqData={"tagId":20289,"contentId":"13245"}